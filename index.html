<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Smart Parking Display</title>

<!-- Firebase v8 -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<!-- Font -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

<style>
  body {
    margin: 0;
    height: 100vh;
    background: radial-gradient(circle at top, #0b4a6f, #020617);
    font-family: 'Inter', sans-serif;
    display: flex;
    justify-content: center;
    align-items: center;
    color: #e5f0ff;
  }

  .panel {
    width: 92%;
    max-width: 1200px;
    background: linear-gradient(180deg, #081a2b, #020617);
    border-radius: 20px;
    padding: 45px 55px;
    box-shadow: 0 30px 80px rgba(0,0,0,0.6);
    text-align: center;
  }

  .title {
    font-size: 2.3vw;
    font-weight: 700;
    letter-spacing: 1.5px;
    color: #7dd3fc;
    margin-bottom: 6px;
  }

  .subtitle {
    font-size: 1.3vw;
    color: #94a3b8;
    margin-bottom: 32px;
  }

  .slots {
    font-size: 22vw;
    font-weight: 700;
    line-height: 1;
    color: #e0f2fe;
    text-shadow: 0 0 30px rgba(56,189,248,0.25);
  }

  .slots-label {
    font-size: 2.1vw;
    letter-spacing: 3px;
    color: #38bdf8;
    margin-top: -12px;
  }

  .status {
    margin-top: 38px;
  }

  .led {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    margin: 0 auto 14px;
    background: #1e293b;
    border: 3px solid #334155;
  }

  .green {
    background: radial-gradient(circle at 30% 30%, #4ade80, #15803d);
    box-shadow: 0 0 35px rgba(74,222,128,0.9);
    border-color: #22c55e;
  }

  .red {
    background: radial-gradient(circle at 30% 30%, #f87171, #991b1b);
    box-shadow: 0 0 35px rgba(248,113,113,0.9);
    border-color: #ef4444;
  }

  .status-text {
    font-size: 1.8vw;
    font-weight: 600;
    letter-spacing: 2px;
    color: #e5f0ff;
  }

  footer {
    margin-top: 32px;
    font-size: 1vw;
    color: #64748b;
    letter-spacing: 1px;
  }
</style>
</head>

<body>

<div class="panel">
  <div class="title">IOT Based Smart Car Parking Management System</div>
  <div class="subtitle">Real-Time Parking Availability Display</div>

  <div class="slots" id="slotsLeft">--</div>
  <div class="slots-label">SLOTS AVAILABLE</div>

  <div class="status">
    <div class="led" id="statusLed"></div>
    <div class="status-text" id="statusText">CHECKING STATUS</div>
  </div>

  <footer>ESP32 • Firebase • IoT Platform</footer>
</div>

<script>
  const firebaseConfig = {
    apiKey: "AIzaSyDA2IVitsAVHCXqi1q9jevMhTrX-kFaQpM",
    databaseURL: "https://smart-parking-monitor-6ae5e-default-rtdb.asia-southeast1.firebasedatabase.app"
  };

  firebase.initializeApp(firebaseConfig);

  firebase.auth().signInWithEmailAndPassword(
    "nabatechworld@gmail.com",
    "123456"
  );

  firebase.auth().onAuthStateChanged(user => {
    if (!user) return;

    firebase.database().ref("parking/slotLeft").on("value", snapshot => {
      const slotLeft = snapshot.val();
      if (slotLeft === null) return;

      document.getElementById("slotsLeft").innerText = slotLeft;

      const led = document.getElementById("statusLed");
      const text = document.getElementById("statusText");

      led.classList.remove("green", "red");

      if (slotLeft >= 1) {
        led.classList.add("green");
        text.innerText = "PARKING AVAILABLE";
      } else {
        led.classList.add("red");
        text.innerText = "PARKING FULL";
      }
    });
  });
</script>

</body>
</html>
